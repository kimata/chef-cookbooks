# Generated by Chef for <%= node['fqdn'] %>

[global]
    workgroup           = COFFEE
    server string       = Samba on <%= node['hostname'].capitalize %>

    hosts allow         = 192.168.2. 192.168.0. 127.

    printing            = bsd
    printcap name       = /dev/null

    log file            = /var/log/samba/log.%m
    max log size        = 1000
    log level           = 1

    max protocol        = SMB2

    security            = user
    invalid users       = root

    encrypt passwords   = yes

    min receivefile size= 16384

    name resolve order  = hosts wins bcast
    dns proxy           = yes 

    mangled names       = no
    case sensitive      = no
    default case        = lower
    preserve case       = yes
    short preserve case = yes

    hide dot files      = yes

    unix charset        = UTF-8
    dos charset         = CP932
    display charset     = UTF-8

    wins support        = no
    domain master       = no

    unix extensions     = no
    wide links          = yes

    create mask         = 0644
    directory mask      = 0755

    vfs objects         = recycle
    recycle:keeptree    = yes
    recycle:touch       = yes
    recycle:versions    = yes
    recycle:maxsize     = 0
    recycle:exclude     = *.tmp

[ストレージ]
    path                = /storage
    public              = yes
    writable            = yes

    recycle:repository  = /storage/.recycle/%u

[バックアップ]
    path                = /backup
    public              = yes
    writable            = yes

    recycle:repository  = /backup/.recycle/%u

[homes]
    comment             = Home Directories
    browseable          = no
    writable            = yes
    
    recycle:repository  = .recycle
